ğŸ§¨ STEP 1: Close IntelliJ completely

No projects open.

ğŸ§¨ STEP 2: Delete IntelliJ metadata

From Terminal in the root folder:

rm -rf .idea
find . -name "*.iml" -delete


This wipes the corrupted project model.


-----------
## how to set gradle verson using sdk man :-

ğŸ”¹ Install Gradle 8.5 (safe for Spring Boot 3.x)

Run:

sdk install gradle 8.5


Then set it as default:

sdk default gradle 8.5


Check:

gradle -v


-----------
## root project ma gradle karelu che and bija badha ena sub module che so how we run :-
./gradlew build -x test    (test ne build na karva)


----------
## and main root mathi j below service run karvi hoy toh:-
./gradlew :Virtual-Power-Plant:bootRun

because VPP ni under apde hems-api-contract ni depdendcy nakheli che so apde direct vpp ne run karsu toh
sproing ne evu lagse ke vpp root folder che and hems-api-contract eni under che and error apse 

-----------
je service ma apde feingClient use kariee and eni under apde api na dto ne e badhu jotu hoy toh same copy paste
karva ni jagyae we do like make 

## Sharing API DTOs in Microservices with Feign Clients
## and delete main class and test folder in contract module that is not needed 
- Create a dedicated **contract module** to hold shared DTO classes.
- Publish this contract module as a separate library.
- In each microservice, add the contract module as a dependency.
- Feign clients use DTOs from the contract module for request/response types.
- Services map DTOs to their internal entity models and vice versa.
- This avoids DTO code duplication and ensures consistent API contracts across services.
- Use `implementation 'com.example:hems-api-contracts:version'` or `implementation project(':hems-api-contracts')` in Gradle.
- Multi-module projects have a root `settings.gradle` including subprojects; single-module projects do not.



ğŸ§© 1. What is a Multi-Module Project?
âœ… Simple meaning:

A multi-module project =
ğŸ‘‰ one main (parent) project
ğŸ‘‰ with many small projects (modules / services) inside it

Example:

Home-Energy-Management-System-HEMS   (PARENT)
 â”œâ”€â”€ SiteManagerService              (MODULE 1)
 â”œâ”€â”€ auth-service-hems               (MODULE 2)
 â”œâ”€â”€ ServiceRegistry-HEMS            (MODULE 3)
 â””â”€â”€ hems-api-contracts              (MODULE 4 - shared DTOs)


So:

ğŸ“¦ One parent
ğŸ“¦ Many child projects
ğŸ”— All connected

ğŸ§  2. Why we make a Parent Gradle Project?
We make a parent project to:

âœ… Build all services together
âœ… Share same Gradle version
âœ… Share same dependency versions
âœ… Run one command:

gradle clean build


and it builds ALL services

Without parent:
âŒ you must build each service separately
âŒ dependency versions may mismatch
âŒ hard to manage

So parent = manager / controller of all modules.

âš™ï¸ 3. What is settings.gradle?

This is the MOST IMPORTANT file for multi-module.

It tells Gradle:

ğŸ“¢ â€œThese folders are part of my projectâ€

Example:

rootProject.name = "Home-Energy-Management-System-HEMS"

include("SiteManagerService")
include("auth-service-hems")
include("ServiceRegistry-HEMS")
include("hems-api-contracts")


Meaning:
ğŸ‘‰ These are sub-projects (modules)
ğŸ‘‰ Gradle should build them together

ğŸ§± 4. What is build.gradle in Parent?

Parent build.gradle is for:

âœ” common configuration
âœ” common plugins
âœ” common Java version
âœ” common repositories

Example use:

subprojects {
    apply plugin: "java"

    java {
        toolchain {
            languageVersion = JavaLanguageVersion.of(17)
        }
    }

    repositories {
        mavenCentral()
    }
}


So:
ğŸ“Œ child projects automatically inherit this

ğŸ” 5. What is gradlew (Gradle Wrapper)?
Meaning:

gradlew = small script that runs Gradle

Purpose:
ğŸ‘‰ Ensures everyone uses SAME Gradle version
ğŸ‘‰ Team members donâ€™t need to install Gradle manually

Files:

gradlew
gradlew.bat
gradle/wrapper/gradle-wrapper.properties


Inside gradle-wrapper.properties:

distributionUrl=https://services.gradle.org/distributions/gradle-8.5-bin.zip


So:

gradlew downloads correct Gradle automatically

ğŸ§© 6. What is hems-api-contracts module?

That is a shared library module.

Used for:
âœ… DTOs
âœ… request/response classes
âœ… common models

Instead of copying DTOs into every service:
ğŸ‘‰ put them in ONE module
ğŸ‘‰ import like:

implementation project(":hems-api-contracts")


So:
ğŸ“¦ one place for DTOs
ğŸ“¦ all services use same classes
ğŸ“¦ no mismatch

ğŸ—ï¸ 7. How Gradle knows modules are connected?

Because in parent:

settings.gradle


And in child:

implementation project(":hems-api-contracts")


This creates:

SiteManagerService ---> hems-api-contracts


Dependency graph:

Parent
 â”œâ”€â”€ SiteManagerService
 â”‚     â””â”€â”€ hems-api-contracts
 â”œâ”€â”€ auth-service-hems
 â””â”€â”€ ServiceRegistry-HEMS

ğŸ§ª 8. Difference: Single vs Multi Module
âŒ Single module:
one-service
 â””â”€â”€ src

âœ… Multi module:
parent
 â”œâ”€â”€ service1
 â”œâ”€â”€ service2
 â””â”€â”€ shared-lib


Used in:
âœ” Microservices
âœ” Large systems
âœ” Enterprise projects

ğŸ“ FINAL SHORT NOTES (copy this)

Multi-module Gradle project means:

One parent project that manages many sub-projects.

Why parent project is needed:

To build all modules together

To share configuration and dependencies

To manage versions in one place

settings.gradle:

Defines which folders are modules

build.gradle (parent):

Holds common config for all modules

gradlew:

Gradle wrapper

Ensures same Gradle version for everyone

Shared module (like hems-api-contracts):

Contains common DTOs/models

Used by all services using implementation project(":module")




-------
ws flow:-
Kafka topic
   â†“
@KafkaListener
   â†“
SimpMessagingTemplate.convertAndSend("/topic/meter", data)
   â†“
WebSocket (/ws)
   â†“
Browser subscribes to /topic/meter
   â†“
JSON shown live in HTML